<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button class="back-button" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Ofrecer Transporte</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Detalles del Auto -->
  <div>
    <h2>Detalles del Auto</h2>
    <p>Marca: {{ carBrand }}</p>
    <p>Modelo: {{ carModel }}</p>
    <p>Color: {{ carColor }}</p>
    <p>Patente: {{ carPlate }}</p>
  </div>
  
  <!-- Filtro de ubicación -->
  <ion-item>
    <ion-label>Buscar en:</ion-label>
    <ion-select [(ngModel)]="selectedLocation" (ionChange)="filterRides()">
      <ion-select-option value="all">Todos</ion-select-option>
      <ion-select-option value="concepcion">Concepción</ion-select-option>
      <ion-select-option value="chiguayante">Chiguayante</ion-select-option>
      <ion-select-option value="san_pedro">San Pedro de la Paz</ion-select-option>
      <ion-select-option value="talcahuano">Talcahuano</ion-select-option>
      <ion-select-option value="hualqui">Hualqui</ion-select-option>
      <ion-select-option value="hualpen">Hualpén</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Lista de viajes -->
  <ion-list>
    <ion-item *ngFor="let ride of filteredRides">
      <ion-label>
        <h2>{{ ride.driverName || 'Conductor Anónimo' }}</h2>
        <p>Ubicación: {{ ride.location }}</p>
        <p>Destino: {{ ride.destination }}</p>
        <p>Auto: {{ carBrand }} {{ carModel }} ({{ carColor }})</p>
        <p>Patente: {{ carPlate }}</p>
        <p>Asientos disponibles: {{ ride.seats }}</p>
        <p>Fecha y Hora: {{ ride.startDateTime | date: 'dd/MM/yyyy HH:mm' }}</p>
        <p>Costo: {{ ride.cost }} {{ ride.costType === 'perKm' ? 'CLP/km' : 'CLP' }}</p>
      </ion-label>
      <ion-button *ngIf="ride.seats > 0" (click)="startRide(ride)" slot="end">Solicitar</ion-button>
      <p *ngIf="ride.seats === 0" slot="end" style="color: red; font-weight: bold;">No Disponible</p>
    </ion-item>
  </ion-list>
</ion-content>
